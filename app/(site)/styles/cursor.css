/* Custom cursor styles with CSS variables for better maintainability */
:root {
	--cursor-border-color: #ffffff;
	--cursor-bg-color: #fff;
	--cursor-size-normal: 100px;
	--cursor-size-pointer: 30px;
	--cursor-transition-speed: 0.2s;
	--cursor-transition:
		width var(--cursor-transition-speed) ease-in-out,
		height var(--cursor-transition-speed) ease-in-out,
		opacity var(--cursor-transition-speed) ease-in-out;
}

/* Only apply cursor styles on non-touch devices */
@media (pointer: fine) {
	body {
		cursor: none;
	}

	.flare {
		/* Basic positioning */
		position: fixed;
		pointer-events: none;
		z-index: 999999;

		/* Visual styling */
		border: 2px solid var(--cursor-border-color);
		border-radius: 50%;
		background-color: var(--cursor-bg-color);
		mix-blend-mode: exclusion;

		/* Performance optimizations */
		will-change: transform, width, height, opacity;
		backface-visibility: hidden;

		/* Transform and animation */
		transform: translate(-50%, -50%) translateZ(0);
		transition: var(--cursor-transition);
	}

	/* Hidden state */
	.flare.hidden {
		opacity: 0;
		visibility: hidden;
		transition:
			opacity var(--cursor-transition-speed) ease-in-out,
			visibility 0s linear var(--cursor-transition-speed);
	}

	/* Pointer state */
	.flare.pointer {
		width: var(--cursor-size-pointer);
		height: var(--cursor-size-pointer);
	}

	/* Media fallbacks for browsers that don't support :has() */
	iframe ~ .flare,
	iframe + .flare,
	video ~ .flare,
	video + .flare {
		opacity: 0;
		visibility: hidden;
	}
}

/* Touch devices - restore default cursor */
@media (pointer: coarse) {
	body {
		cursor: auto;
	}

	.flare {
		display: none;
	}
}

/* Firefox-specific styles */
@-moz-document url-prefix() {
	.flare {
		z-index: 2147483647;
	}
}

/* High contrast / accessibility mode support */
@media (prefers-contrast: more) {
	.flare {
		border-width: 3px;
		mix-blend-mode: normal;
		background-color: transparent;
	}
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
	.flare {
		transition: none;
	}
}
